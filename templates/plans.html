<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment Interface</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h2>Select Your Plan</h2>

        <!-- Radio Buttons for Plan Type -->
        <div class="mb-4">
            <label class="form-label">Choose Plan:</label><br>
            <input type="radio" id="standard" name="planType" value="standard" checked> Standard
            <input type="radio" id="premium" name="planType" value="premium" class="ms-4"> Premium
        </div>

        <!-- Tab Navigation for Plan Details -->
        <div class="d-flex justify-content-center mb-4">
            <div class="btn-group" role="group" aria-label="Plan Selection">
                <button type="button" class="btn btn-outline-primary" id="standard-tab" data-bs-toggle="tab" data-bs-target="#standard-plan">Standard Plan</button>
                <button type="button" class="btn btn-outline-primary" id="premium-tab" data-bs-toggle="tab" data-bs-target="#premium-plan">Premium Plan</button>
            </div>
        </div>

        <!-- Tab Content for Plans -->
        <div class="tab-content">
            <!-- Standard Plan Tab -->
            <div class="tab-pane fade show active" id="standard-plan">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Standard Plan</h5>
                        <p class="card-text">Choose the payment frequency for the Standard Plan</p>

                        <!-- Payment Frequency Dropdown -->
                        <label for="standard-payment">Choose Payment Frequency:</label>
                        <select id="standard-payment" class="form-select" onchange="updatePricing('standard')">
                            <option value="quarterly">Quarterly - ₦20,000</option>
                            <option value="biannual">Bi-Annual - ₦26,000</option>
                            <option value="annual">Annual - ₦50,000</option>
                        </select>

                        <div id="standard-amount" class="mt-3"></div>
                    </div>
                </div>
            </div>

            <!-- Premium Plan Tab -->
            <div class="tab-pane fade" id="premium-plan">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Premium Plan</h5>
                        <p class="card-text">Choose the payment frequency for the Premium Plan</p>

                        <!-- Payment Frequency Dropdown -->
                        <label for="premium-payment">Choose Payment Frequency:</label>
                        <select id="premium-payment" class="form-select" onchange="updatePricing('premium')" disabled>
                            <option value="annual">Annual - ₦80,000</option>
                        </select>

                        <div id="premium-amount" class="mt-3"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Payment Button -->
        <div class="d-flex justify-content-center mt-4">
            <button class="btn btn-success" id="pay-button" onclick="initiatePayment()">Proceed to Payment</button>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>
    <script src="https://js.paystack.co/v1/inline.js"></script>

    <script>
        // Update Pricing based on selected plan and payment frequency
        function updatePricing(planType) {
            const standardAmountElement = document.getElementById("standard-amount");
            const premiumAmountElement = document.getElementById("premium-amount");

            if (planType === 'standard') {
                const standardPayment = document.getElementById("standard-payment").value;
                let amount = 0;
                if (standardPayment === 'quarterly') {
                    amount = 20000;
                } else if (standardPayment === 'biannual') {
                    amount = 26000;
                } else if (standardPayment === 'annual') {
                    amount = 50000;
                }
                standardAmountElement.innerHTML = `Total: ₦${amount}`;
            } else if (planType === 'premium') {
                const premiumPayment = document.getElementById("premium-payment").value;
                let amount = 80000;
                premiumAmountElement.innerHTML = `Total: ₦${amount}`;
            }
        }

        // Handle Plan Change (Enable/Disable Dropdowns based on plan type)
        document.querySelectorAll('input[name="planType"]').forEach((radio) => {
            radio.addEventListener('change', function () {
                if (this.value === 'standard') {
                    document.getElementById('premium-plan').classList.remove('show', 'active');
                    document.getElementById('standard-plan').classList.add('show', 'active');
                    document.getElementById('premium-payment').disabled = true;
                    document.getElementById('standard-payment').disabled = false;
                } else if (this.value === 'premium') {
                    document.getElementById('standard-plan').classList.remove('show', 'active');
                    document.getElementById('premium-plan').classList.add('show', 'active');
                    document.getElementById('premium-payment').disabled = false;
                    document.getElementById('standard-payment').disabled = true;
                }
            });
        });

        // Initialize the payment process using Paystack
        function initiatePayment() {
            let planType = document.querySelector('input[name="planType"]:checked').value;
            let amount = 0;

            if (planType === 'standard') {
                const paymentFrequency = document.getElementById('standard-payment').value;
                if (paymentFrequency === 'quarterly') amount = 20000;
                else if (paymentFrequency === 'biannual') amount = 26000;
                else if (paymentFrequency === 'annual') amount = 50000;
            } else if (planType === 'premium') {
                amount = 80000;
            }

            const handler = PaystackPop.setup({
                key: 'your_paystack_public_key_here', // Replace with your Paystack public key
                email: 'customer@example.com', // Replace with the customer's email
                amount: amount * 100, // Paystack expects the amount in kobo
                currency: 'NGN',
                callback: function (response) {
                    alert('Payment successful! Reference: ' + response.reference);
                    // Process the payment confirmation
                },
                onClose: function () {
                    alert('Transaction was canceled');
                }
            });

            handler.openIframe();
        }

        // Initialize the page with default pricing
        updatePricing('standard');
    </script>
</body>
</html>
